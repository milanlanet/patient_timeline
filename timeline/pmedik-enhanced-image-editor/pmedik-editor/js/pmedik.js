var pmedik;
pmedik_init=function(g,h,d,f){var e=(new Date).valueOf(),a=jQuery;a.when(a("<link/>",{rel:"stylesheet",type:"text/css",href:d+"css/pmedik.css?"+e}).appendTo("head"),a.getScript(d+"lib/camanjs/dist/caman.full.js"),a.getScript(d+"js/pmedik_core.js?"+e),a.getScript(d+"js/jquery.nouislider.min.js"),a.get(d+"main_form.html?"+e,function(d){a(h).html(d)}),a.Deferred(function(d){a(d.resolve)})).done(function(){pmedik=new pmedik_core;"undefined"!=typeof f&&a.each(f,function(a,c){pmedik.setCallback(a,c)});a=jQuery;Caman.remoteProxy=
Caman.IO.useProxy("php");Caman.remoteProxy=d+"lib/camanjs/proxies/caman_proxy.php";pmedik.setCallback("afterRender",function(){});pmedik.setCallback("beforeImageLoad",function(){a("#pmedik-overlay").show()});pmedik.setCallback("afterImageLoad",function(){a("#pmedik-overlay").fadeOut()});pmedik.init("#pmedik-canvas",g);var e=pmedik.getTools();a.each(e,function(b,c){"filter"===c.type&&a("#"+b+"_slider").noUiSlider({range:[c.from,c.to],handles:1,step:1,start:0,slide:function(){pmedik.setFilter(b,parseInt(a(this).val()))}})});
a("#pmedik-container").on("click","#pmedik-reset",function(){confirm("Do you really want reset all changes?")&&pmedik.resetFilters()});a("#pmedik-container").on("click",".pmedik-tool",function(){var b=a(this).data("tool"),c=1===a(this).data("value")?0:1;a(this).data("value",c);pmedik.setFilter(b,c)});a("#pmedik-container").on("click",".pmedik-tool.greyscale, .pmedik-tool.invert",function(){a(this).toggleClass("switched")});a("#pmedik-container").on("click",".pmedik-rotate",function(){var b=pmedik.getToolValue("rotate"),
b=b+(a(this).hasClass("right")?90:-90);270<b?b=0:0>b&&(b=270);pmedik.setFilter("rotate",b)});a("#pmedik-container").on("click",".pmedik-filter-pm",function(){var b=a(this).data("tool"),c=parseInt(a("#"+b+"_slider").val()),d=a(this).data("direction"),e=pmedik.getTools(),c=c+5*("minus"===d?-1:1),c=c>e[b].to?e[b].to:c,c=c<e[b].from?e[b].from:c;a("#"+b+"_slider").val(c);pmedik.setFilter(b,c);return!1});a("#pmedik-container").on("click","#pmedik-save",function(){pmedik.save();return!1});a("#pmedik-container").on("mouseover",
".pmedik-filter-edit",function(){a(this).parent().find(".pmedik-slider-noui").slideDown("fast")});a("#pmedik-container").on("mouseleave",".pmedik-filter",function(){a(this).find(".pmedik-slider-noui").slideUp("fast")})})};
